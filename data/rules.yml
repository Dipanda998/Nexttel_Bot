version: "2.0"

rules:

- rule: Handoff 
  steps:
    - intent: handoff
    - action: utter_salutation
    
- rule: Problème internet 
  steps: 
    - intent: connexion_impossible
    - action: action_store_probleme
    - action: utter_probleme_internet_step_1

- rule: salutation
  steps:
  - intent: salutation
  - action: utter_salutation
  
- rule: Fall back
  steps:
  - intent: nlu_fallback
  - action: action_back_principal

- rule: configuration internet iphone court
  steps:
  - intent: configuration_iphone
  - action: action_store_probleme
  - action: utter_configuration_iphone
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: satisfait iphone
  steps: 
  - action: utter_configuration_iphone
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: satisfait android
  steps: 
  - action: utter_configuration_android
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: satisfait modem
  steps: 
  - action: utter_configuration_modem  
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: configuration internet modem court
  steps:
  - intent: configuration_modem
  - action: action_store_probleme
  - action: utter_configuration_modem
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: activation puce
  steps:
  - intent: activer_puce
  - action: action_store_probleme
  - action: utter_activation_puce
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: identifier puce
  steps:
  - intent: identifier_puce
  - action: action_store_probleme
  - action: utter_identifier_puce
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: connaitre numero telephone
  steps:
  - intent: connaitre_numero
  - action: action_store_probleme
  - action: utter_connaitre_numero
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: appel sans crédit
  steps:
  - intent: appel_sans_credit
  - action: action_store_probleme
  - action: utter_appel_sans_credit
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: garder son numéro de téléphone à letranger
  steps:
  - intent: utiliser_phone_etranger
  - action: action_store_probleme
  - action: utter_utiliser_numero_etranger
  - action: resolu_form
  - active_loop: resolu_form


- rule: rermerciement
  steps:
  - intent: remerciement
  - action: utter_rermerciement

- rule: demande box
  steps:
  - intent: demande_box
  - action: action_store_probleme
  - action: utter_prix_wifiBox
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: demande modem
  steps:
  - intent: demande_modem
  - action: action_store_probleme
  - action: utter_prix_modem_poche
  - action: resolu_form
  - active_loop: resolu_form
  
- rule: demande telephone
  steps:
  - intent: demande_telephone
  - action: action_store_probleme
  - action: utter_prix_telephone
  - action: resolu_form
  - active_loop: resolu_form
 
- rule: configuration internet android court
  steps:
  - intent: configuration_android
  - action: action_store_probleme
  - action: utter_configuration_android
  - action: resolu_form
  - active_loop: resolu_form
   
# - rule: satisfaction oui
#   steps:
#   - action: utter_satisfait
#   - intent: affirmation
#   - action: resolu_form
#   - active_loop: resolu_form
  
# - rule: satisfaction non
#   steps:
#   - action: utter_satisfait
#   - intent: negation
#   - action: resolu_form
#   - active_loop: resolu_form
  
- rule: Submit resolu form
  condition: 
  - active_loop: resolu_form
  steps:
  - action: resolu_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: None
  - action: action_sauvegarde_csv
  - action: action_reset_slots
  - action: utter_rermerciement
  
- rule: Submit form
  condition: 
  - active_loop: user_details_form
  steps:
  - action: user_details_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: None
  - action: utter_verification_user_form
  
- rule: submit choix forfait
  condition: 
  - active_loop: choix_forfait_form
  steps:
  - action: choix_forfait_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: None
#   - action: action_categorie_internet
  - action: action_list_forfait
  - action: resolu_form
  - active_loop: resolu_form
  

- rule: Transfert vers un humain Refusée
  steps:
  - action: utter_transfert
  - intent: negation
  - action: action_reset_slots
  - action: utter_reformulation 
 
- rule: Transfert vers un humain Autorisée
  steps:
  - action: utter_transfert
  - intent: affirmation
  - action: user_details_form
  - active_loop: user_details_form

- rule: Validate information True
  steps:
  - action: utter_verification_user_form
  - intent: affirmation
  - action: action_submit
  - action: action_send_mail
  - action: action_reset_slots
  
- rule: Validate information False
  steps:
  - action: utter_verification_user_form
  - intent: negation
  - action: action_reset_slots
  - action: user_details_form
  - active_loop: user_details_form  
  

  